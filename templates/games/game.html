{% extends 'base.html' %}

{% block content %}




<script>
  setTimeout(function(){
    window.location.reload();
 }, 5000);
</script>




<div class="alert alert-dismissible alert-success">
  <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
  <h5>{{game.status}}</h5>
</div>

{% comment %} <div class="alert alert-dismissible alert-info">
  <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
  {{game.actions_history.0.message}}
</div> {% endcomment %}

<div class="accordion" id="accordionExample">
    <div class="accordion-item">

      {% with game.actions_history.0 as action %}
      <h2 class="accordion-header" id="headingOne">
        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
          <span class="{{action.badge_class}}"><h5>{{action.message}}<h5></span>
        </button>
      </h2>
      {% endwith %}

      <div id="collapseOne" class="accordion-collapse collapse" aria-labelledby="headingOne" data-bs-parent="#accordionExample" style="">
        <div class="accordion-body">
          {% for action in game.actions_history %}
          {% if not forloop.first %}
          <span class="{{action.badge_class}}"><h6>{{action.message}}</h6></span>
          <br>
          {% endif %}
          {% endfor %}
        </div>
      </div>

    </div>
  </div>

<!---------- ACTIONS -------------->
<div class="row d-flex justify-content-center" style='padding-top: 15px;' style='padding-right: 15px;'>
  <div class="card-header">
    {% comment %} your next step? {% endcomment %}
  </div>
  <div class="card-body">
    <div class="btn-group" role="group" aria-label="Basic example">
    {% for action in actions %}

    <form method="post" enctype="multipart/form-data"
      {% if action.url %}
      action="{{ action.url }}"
      {% endif %}
      >
      {% csrf_token %}
      {% if action.bet_values %}
      <input id="value" type="text" name="value" value="{{action.bet_values.min}}">
      {% else %}
      <button type="submit" class="{{action.button_class}}">{{action.name}}</button>
      {% endif %}
    </form>

    {% endfor %}
  </div>
</div>

</div>
<!----------- CARDS ---------------->
<div class="card text-white bg-info mb-3" style="max-width: 20rem;">
  <div class="card-body">
    <p class="card-text">{{game.bank}}</p>
    <div class="card-header"> game bank </div>
  </div>
</div>

<div class="card text-white bg-info mb-3" style="max-width: 20rem;">
  <div class="card-body">
    <h1 class="card-title"><small class='game_card'>{{ game.table }}</small></h1>
    <div class="card-header"> flop </div>
  </div>
</div>

<div class="card text-white bg-warning mb-3" style="max-width: 20rem;">
  <div class="card-body">
    <h1 class="card-title"><small class='game_card'>{{ player.hand }}</small></h1>
    <div class="card-header"> your hand </div>
  </div>
</div>


{% include 'games/includes/player_card.html' %}
{% for player in other_players %}
{% include 'games/includes/player_card.html' %}
{% endfor %}






{% endblock content %}